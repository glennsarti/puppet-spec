Examples('file based loader',
  Given(Settings('module_path' => Directory(
    'mod' => {
      'functions' => {
        'myfunc.pp' => @(END)
          function mod::myfunc(String $arg) {
            "$arg from myfunc"
          }
          |-END
        },
      'types' => {
        'myalias.pp' => 'type Mod::Myalias = Integer[0, 127]',
        'mytype.pp' => @(END)
          type Mod::Mytype = {
            attributes => { 'a' => Integer }
          }
          |-END
        },
    }
  ))),

  Example('loads a function in a module',
    Given(@(SRC)),
      mod::myfunc('hello')
      |-SRC
    Evaluates_to('hello from myfunc')),

  Example('loads a type alias in a module',
    Given(@(SRC)),
      String(Mod::Myalias)
      |-SRC
    Evaluates_to('Mod::Myalias')),

  Example('loads an object type in a module',
    Given(@(SRC)),
      String(Mod::Mytype(23))
      |-SRC
    Evaluates_to(`Mod::Mytype('a' => 23)`)),
)
