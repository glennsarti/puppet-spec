Examples('file based loader',
  Fixture(
    AsSetting('module_path'),
    'mod' => {
      'functions' => {
        'myfunc.pp' => @(END)
          function mod::myfunc(String $arg) {
            "$arg from myfunc"
          }
          |-END
        },
      'types' => {
        'mytype.pp' => 'type Mod::Mytype = Integer[0, 127]'
        },
      }).with |$fixture| {[
    Example('loads a function in a module',
      Given(
        $fixture,
        Source(@(SRC))
          mod::myfunc('hello')
          |-SRC
      ),
      Evaluates_to('hello from myfunc')),
    Example('loads a type in a module',
      Given(
        $fixture,
        Source(@(SRC))
          String(Mod::Mytype)
          |-SRC
      ),
      Evaluates_to('Mod::Mytype')),
    ]}
)